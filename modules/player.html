<!-- BACKGROUND ANIMATION -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="../favicon.svg" type="image/x-icon" />
    <title>Document</title>
    <style>
      body {
        /* background-color: rgb(17, 17, 17); */
        background-image: url("../images/bg/diamond.png");
        background-size: 512px;
      }
      .gameContainer {
        display: flex;
        justify-content: center;
      }
      canvas {
        border: 1px solid rgba(255, 254, 254, 0.185);
      }
    </style>
  </head>
  <body>
    <button id="playPause">Pause</button>
    <div class="gameContainer">
      <canvas id="canvas"></canvas>
    </div>
  </body>
  <script>
    let canvas = document.getElementById("canvas");
    let ctx = canvas.getContext("2d");

    canvas.width = 480;
    canvas.height = 720;
    class Player {
        constructor(config){
            this.x=config.x||0;
            this.y=config.y||0;
            this.img=new Image();
            this.img.src=config.src||0;
            this.size=24;
            this.focusCell=[0,0];
        }
        
        draw(globalCtx){
            globalCtx.drawImage(
                this.img,
                this.focusCell[0]*24,this.focusCell[1],
                this.size,this.size,
                this.x,this.y,
                this.size,this.size,
            )
        }
    }

    let shipSprite = "../images/hero/sprite-ship.png";
    let player = new Player({src:shipSprite,x:100,y:100});
    player.img.onload=()=>{player.draw(ctx);}

    let enemy = new Player({src:shipSprite,x:200,y:200});
    enemy.img.onload=()=>{enemy.draw(ctx)}
    enemy.focusCell = [4,0];
    // console.log("drawn")
    // player.src = "../images/hero/sprite-ship.png"
    // player.onload=()=>{
    //     ctx.drawImage(player,0,0) 
    // }



    // let animatedBgMain = new Image();
    // let animatedBgHelper = new Image();
    // let animatedBgMask = new Image();
    // let gradientImage = new Image();
    // let spaceBackground = new Image();
    // animatedBgMain.src = "../images/bg/grid.png";
    // animatedBgHelper.src = "../images/bg/grid.png";
    // animatedBgMask.src = "../images/bg/grid.png";
    // gradientImage.src = "../images/bg/gradient.png";
    // spaceBackground.src = "../images/bg/space.jpg";

    // Play and pause mechanism
    // let counter = 100;
    // let isPaused = false;
    // let buttonPlayPause = document.getElementById("playPause");
    // buttonPlayPause.addEventListener("click", () => {
    //   if (isPaused) {
    //     isPaused = false;
    //     gameLoop();
    //   } else {
    //     isPaused = true;
    //   }
    // });
    // function gameLoop() {
    //     console.log("Game Loop");
    //     function handlePrevFrame(){
    //         ctx.clearRect(0, 0, canvas.width, canvas.height);
    //     }
    //     function handleBgAnimation(){
    //         counter += 2;
    //         ctx.drawImage(spaceBackground, 0, 0, 480, 620, 0, 0, 480, 720);
    //         ctx.globalAlpha = 0.7;
    //         ctx.drawImage(gradientImage, 0, 0, 480, 620, 0, 0, 480, 720);
    //         ctx.drawImage(animatedBgMain, 0, 0, 480, 620, 0, counter, 480, 620);
    //         ctx.drawImage(animatedBgHelper, 0, 0, 480, 620, 0, counter-620, 480, 620);
    //         ctx.drawImage(animatedBgMask, 0, 0, 480, 620, 0, counter-(620*2), 480, 620);
    //         ctx.globalAlpha = 1;
    //         if (counter > 720) counter = 100;
    //     }
    //     ctx.drawImage(spaceBackground, 0, 0, 480, 620, 0, 0, 480, 720);

    //     handlePrevFrame();
    //     handleBgAnimation();
    //     // handlePrevious frame
    //     // handle background animation
    //     // place player in map
    //     // place enemies from map stages

    //     if (isPaused) return;
    //     requestAnimationFrame(() => {
    //         gameLoop();
    //     });
    // }
    // gameLoop();
  </script>
</html>
